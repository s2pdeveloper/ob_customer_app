{"version":3,"file":"src_app_auth-layout_login_login_module_ts.js","mappings":"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","sources":["./src/app/auth-layout/login/login-routing.module.ts","./src/app/auth-layout/login/login.module.ts","./src/app/auth-layout/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { LoginPageRoutingModule } from './login-routing.module';\nimport { LoginPage } from './login.page';\nimport { ValidationMessagesPageModule } from 'src/app/core/validation-messages/validation-messages.module';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule,\n    ValidationMessagesPageModule,\n    SharedModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, Validators, FormControl } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { StorageService } from 'src/app/core/services';\nimport { LoaderService } from 'src/app/core/services/loader.service';\nimport { ToastService } from 'src/app/core/services/toast.service';\nimport { AuthService } from 'src/app/service/auth/auth.service';\nimport { Plugins } from '@capacitor/core';\nimport { TranslateService } from '@ngx-translate/core';\nconst { Device, Geolocation } = Plugins;\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  submitted: boolean = false;\n  returnUrl: string;\n  deviceInfo: any;\n  showEye: boolean = false;\n  constructor(\n    private router: Router,\n    private localStorage: StorageService,\n    private route: ActivatedRoute,\n    private spinner: LoaderService,\n    private toaster: ToastService,\n    public authService: AuthService,\n    public translate: TranslateService\n  ) {}\n\n  loginForm = new FormGroup({\n    mobile: new FormControl('', [Validators.required]),\n    password: new FormControl('', [Validators.required]),\n  });\n\n  async ngOnInit() {\n    this.returnUrl =\n      this.route.snapshot.queryParams[`returnUrl`] || '/landing-page';\n  }\n\n  get form() {\n    return this.loginForm.controls;\n  }\n\n  login() {\n    if (this.loginForm.invalid) {\n      this.toaster.presentToast('warning', 'Please fill all valid field !');\n      return;\n    }\n    this.spinner.showLoader();\n    this.authService.login(this.loginForm.value).subscribe((success) => {\n      this.localStorage.set('OBCustomer', success);\n      this.router.navigate([`/app/tabs/landing-page`], { replaceUrl: true });\n      this.saveDeviceToken(success._id);\n      this.spinner.hideLoader();\n    });\n  }\n\n  getDeviceInfo = async () => {\n    this.deviceInfo = await Device.getInfo();\n    this.deviceInfo.geoLocation = await (\n      await Geolocation.getCurrentPosition()\n    ).coords;\n  };\n\n  saveDeviceToken(id) {\n    let newObj: any = Object.assign(\n      {\n        customerId: id,\n        deviceId: this.localStorage.get('OBUserDeviceId'),\n      },\n      this.deviceInfo\n    );\n    newObj.deviceId &&\n      this.authService.createAndUpdateUserDevice(newObj).subscribe();\n  }\n}\n"],"names":["Component","FormGroup","Validators","FormControl","ActivatedRoute","Router","StorageService","LoaderService","ToastService","AuthService","Plugins","TranslateService","Device","Geolocation","LoginPage","constructor","router","localStorage","route","spinner","toaster","authService","translate","mobile","required","password","deviceInfo","getInfo","geoLocation","getCurrentPosition","coords","ngOnInit","returnUrl","snapshot","queryParams","form","loginForm","controls","login","invalid","presentToast","showLoader","value","subscribe","success","set","navigate","replaceUrl","saveDeviceToken","_id","hideLoader","id","newObj","Object","assign","customerId","deviceId","get","createAndUpdateUserDevice","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
<ion-header>
  <ion-toolbar>
    <ion-title> {{ 'favoritesShop' | translate}} </ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/app/tabs/landing-page"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content> </ion-refresher-content>
  </ion-refresher>

  <!-- search bar -->
  <ion-row>
    <ion-col size="12">
      <ion-searchbar
        class="search-box ion-no-padding ion-margin-bottom size"
        inputmode="search"
        searchIcon
        animated
        type="text"
        debounce="900"
        showCancelButton="never"
        placeholder="{{ 'searchShop' | translate}}"
        autocomplete="on"
        autocorrect="on"
        [(ngModel)]="search"
        (ionChange)="onSearch()"
      >
      </ion-searchbar>
    </ion-col>
  </ion-row>

  <ion-grid>
    <ion-row *ngFor="let s of shopFavorites">
      <ion-col size="12">
        <ion-card
          class="shop-card"
          [ngStyle]="{ 
          'background-image': getUrl(s?.shopId.image), 
          'background-repeat': 'no-repeat', 
          'object-fit':'cover',
          'background-size':'100% 100%'
         }"
        >
          <div class="ion-text-end ion-margin-end ion-margin-top">
            <ion-icon
              (click)="addToFavorite(s)"
              name="heart"
              fill=""
              size="large"
              slot="end"
              color="primary"
            >
            </ion-icon>
          </div>
          <ion-badge
            color="success"
            class="rating ion-text-end"
            (click)="navigateTo('/shop-detail',s?.shopId._id)"
          >
            5
            <ion-icon name="star"></ion-icon>
          </ion-badge>
        </ion-card>
        <b class="text-bold font-larger shade-color ion-margin-top"
          >{{s.shopId.shopName}}</b
        >
        <ion-label
          (click)="navigateTo('/shop-detail',s?.shopId._id)"
          class="address ion-margin-top"
          color="
            light"
        >
          <ion-text class="ion-margin-start ion-margin-bottom">
            <h4>
              {{ s.shopId .address.city ? s.shopId .address.city : ""}},
              {{s.shopId .address.state ? s.shopId .address.state : "" }},
              {{s.shopId .address.pinCode ? s.shopId .address.pinCode : "" }}.
            </h4>
          </ion-text>
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Loading more data..."
    >
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>

<ion-header>
  <ion-toolbar>
    <ion-title>{{'chooseAndPickItem' | translate}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="category" mode="md"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end" class="ion-margin-end">
      <ion-icon name="home" slot="end" (click)="navigateToHome()"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-searchbar class="search-box ion-padding-top" inputmode="search" searchIcon animated type="text" debounce="600"
    showCancelButton="never" autocomplete="on" autocorrect="on" [(ngModel)]="searchText" (ionChange)="onSearch()"
    placeholder="{{ 'searchProduct' | translate}}">
  </ion-searchbar>

  <ion-slides [options]="buttonSlide" class="ion-padding">
    <ion-slide *ngFor="let item of subCategory;let i=index">
      <div [ngClass]="item.isActive ? 'subCategoryActive':null" (click)="getProduct(item.subCategory._id)">
        <img class="img-box" src="{{item.subCategory.image}} " /><br />
        <ion-note class="sub-heading ion-text-capitalize ion-text-wrap">{{item.subCategory.name}}</ion-note>
      </div>
    </ion-slide>
  </ion-slides>

  <div class="ion-padding">
    <ion-row>
      <ion-col size="6" size-lg="4" size-md="5" *ngFor=" let item of productArray" style="display: flex;">
        <ion-card class="catalogue-card shadow-color-1" button="true">
          <div class="ion-no-padding ion-text-center">
            <img height="100%" width="100%" *ngIf="item.catalogueMedia.length" [src]="item.catalogueMedia[0].image">
            <img height="100%" width="100%" *ngIf="!item.catalogueMedia.length"
              src="assets/images/placeholder_product.png" alt="catalogue-image" />
          </div>
          <ion-card-content>
            <ion-note class="cat-title ion-text-capitalize ion-text-wrap">{{item.title}}</ion-note>
            <p class="ion-text-wrap">{{ item.description | truncate:24 }}</p>
            <ion-label class="cat-price" color="primary">
              â‚¹ {{item.price}}
              <ion-checkbox  [(ngModel)]="item.isChecked"></ion-checkbox>
            </ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ng-template #noDataFound>
      <div class="noData">
        <ion-label>No Product Found</ion-label>
      </div>
    </ng-template>
  </div>


  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>


<ion-footer class="ion-no-border">
  <div class="ion-padding-top footer-msg" *ngIf="productArray?.length > 0">
    <ion-button (click)="navigateToCheckout()" shape="round" expand="block" class="btn-color-1 btn-height-large"
      type="submit">
      {{'proceedToCheckout' | translate}}
    </ion-button>
  </div>
</ion-footer>
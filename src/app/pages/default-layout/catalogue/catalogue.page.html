<ion-header>
  <ion-toolbar>
    <ion-title>{{'product' | translate}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="category" mode="md"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end" class="ion-margin-end">
      <ion-icon name="home" slot="end" (click)="navigateToHome()"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-searchbar class="search-box ion-padding-top" inputmode="search" searchIcon animated type="text" debounce="600"
    showCancelButton="never" autocomplete="on" autocorrect="on" [(ngModel)]="searchText" (ionChange)="onSearch()"
    placeholder="{{ 'searchProduct' | translate}}">
  </ion-searchbar>

  <ion-slides [options]="buttonSlide" class="ion-padding">
    <ion-slide *ngFor="let item of subCategory;let i=index">
      <div [ngClass]="item.isActive ? 'subCategoryActive':null"
        (click)="getProduct(item.subCategory._id)">
        <img class="img-box" src="{{item.subCategory.image}} " /><br />
        <ion-note class="sub-heading ion-text-capitalize">{{item.subCategory.name}}</ion-note>
      </div>
    </ion-slide>
  </ion-slides>

  <div class="clearfix">
    <ion-grid *ngIf="productArray?.length > 0;else noDataFound">
      <ion-row appAnimateItems className="bounceIn">
        <ion-col *ngFor=" let item of productArray" class="animation-normal">
          <ion-list lines="none">
            <ion-card>
              <ion-item class="ion-no-padding">
                <ion-checkbox slot="start" [(ngModel)]="item.isChecked"></ion-checkbox>
                <ion-item>
                  <ion-thumbnail slot="start">
                    <img class="img-fluid" *ngIf="item.catalogueMedia.length" [src]="item.catalogueMedia[0].image">
                    <img class="img-fluid" *ngIf="!item.catalogueMedia.length"
                      src="assets/images/placeholder_product.png" alt="product-image" />
                  </ion-thumbnail>
                  <ion-label>
                    <ion-row class="ion-justify-content-between">
                      <ion-col>
                        <h6 class="ion-text-capitalize ion-text-wrap">
                          <span class="text-bold">{{item.title}}</span>
                        </h6>
                        <p class="ion-text-wrap">
                          {{item.description | truncate:25}}
                        </p>
                        <p class="ion-text-wrap">â‚¹ {{item.price}}</p>
                      </ion-col>
                    </ion-row>
                  </ion-label>
                </ion-item>
              </ion-item>
            </ion-card>
          </ion-list>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ng-template #noDataFound>
      <div class="noData">
        <ion-label>No Product Found</ion-label>
      </div>
    </ng-template>
  </div>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>


<ion-footer class="ion-no-border">
  <div class="ion-padding-top footer-msg" *ngIf="productArray?.length > 0">
    <ion-button (click)="navigateToCheckout()" shape="round" expand="block" class="btn-color-1 btn-height-large" type="submit">
      {{'Checkout' | translate}}
    </ion-button>
  </div>
</ion-footer>